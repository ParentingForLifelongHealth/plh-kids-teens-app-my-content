{
  "flow_type": "template",
  "flow_name": "onboarding_settings_page_4",
  "status": "released",
  "rows": [
    {
      "name": "facilitator_id",
      "value": "@fields.facilitator_id"
    },
    {
      "name": "facilitator_data",
      "value": "characters.@local.facilitator_id"
    },
    {
      "name": "facilitator_row",
      "value": "@data.@local.facilitator_data"
    },
    {
      "name": "speaker_name",
      "value": "@local.facilitator_row.name",
      "exclude_from_translation": true
    },
    {
      "name": "speaker_image_asset",
      "value": "@local.facilitator_row.image_asset",
      "exclude_from_translation": true
    },
    {
      "name": "speaker_position",
      "value": "left",
      "exclude_from_translation": true
    },
    {
      "name": "variant",
      "value": "gray",
      "exclude_from_translation": true
    },
    {
      "exclude_from_translation": true
    },
    {
      "name": "facilitator_message",
      "value": "@global.facilitator_message_3",
      "exclude_from_translation": true
    },
    {
      "name": "question_child_age",
      "value": "@global.question_child_age",
      "exclude_from_translation": true
    },
    {
      "name": "facilitator_message",
      "value": "@global.facilitator_message_3_multipe_child",
      "condition": "@fields.household_children > 1",
      "exclude_from_translation": true
    },
    {
      "name": "question_child_age",
      "value": "@global.question_child_age_multipe_child",
      "condition": "@fields.household_children > 1",
      "exclude_from_translation": true
    },
    {
      "type": "text_bubble",
      "name": "text_bubble",
      "value": "@local.facilitator_message",
      "parameter_list": "speaker_image_asset: @local.speaker_image_asset;\nspeaker_name: @local.speaker_name;\nspeaker_position: @local.speaker_position;\nvariant: @local.variant;",
      "exclude_from_translation": true
    },
    {
      "type": "text",
      "name": "question_child_age",
      "value": "@local.question_child_age",
      "parameter_list": "style: emphasised;",
      "exclude_from_translation": true
    },
    {
      "type": "text_box",
      "name": "child_age_input",
      "value": "@fields.child_age",
      "parameter_list": "placeholder: @global.placeholder_child_age;\nnumber_input: true;",
      "condition": "!!@fields.child_age",
      "exclude_from_translation": true
    },
    {
      "type": "text_box",
      "name": "child_age_input",
      "parameter_list": "placeholder: @global.placeholder_child_age;\nnumber_input: true;",
      "condition": "!@fields.child_age",
      "exclude_from_translation": true
    },
    {
      "name": "valid_child_age_input",
      "value": "@calc((/^\\d+$/.test(@local.child_age_input) && @local.child_age_input>= 2 && @local.child_age_input<= 10) || @local.child_age_input == '' || !@local.child_age_input)",
      "exclude_from_translation": true
    },
    {
      "type": "text",
      "name": "warning_child_age_input",
      "value": "@global.child_age_input_restriction",
      "style_list": "color: #FF0000;\nfont-size: 14px",
      "condition": "!@local.valid_child_age_input",
      "exclude_from_translation": true
    },
    {
      "exclude_from_translation": true
    },
    {
      "type": "text",
      "name": "user_relationship",
      "value": "@global.question_user_relationship",
      "parameter_list": "style: emphasised;",
      "exclude_from_translation": true
    },
    {
      "type": "combo_box",
      "name": "user_relationship_input",
      "value": "@fields.user_relationship",
      "parameter_list": "answer_list: @data.user_relationship;\nplaceholder: @global.placeholder_user_relationship;\nvariant: dropdown;",
      "condition": "!!@fields.user_relationship",
      "exclude_from_translation": true
    },
    {
      "type": "combo_box",
      "name": "user_relationship_input",
      "parameter_list": "answer_list: @data.user_relationship;\nplaceholder: @global.placeholder_user_relationship;\nvariant: dropdown;",
      "condition": "!@fields.user_relationship",
      "exclude_from_translation": true
    },
    {
      "type": "text",
      "name": "question_child_gender",
      "value": "@global.question_child_gender",
      "parameter_list": "style: emphasised;"
    },
    {
      "type": "combo_box",
      "name": "child_gender_input",
      "value": "@fields.child_gender",
      "parameter_list": "answer_list: @data.child_gender;\nplaceholder: @global.placeholder_child_gender;\nvariant: dropdown;",
      "condition": "!!@fields.child_gender",
      "exclude_from_translation": true
    },
    {
      "type": "combo_box",
      "name": "child_gender_input",
      "parameter_list": "answer_list: @data.child_gender;\nplaceholder: @global.placeholder_child_gender;\nvariant: dropdown;",
      "condition": "!@fields.child_gender",
      "exclude_from_translation": true
    },
    {
      "name": "completed_enabled",
      "value": "!!@local.child_age_input && @local.valid_child_age_input && !!@local.user_relationship_input && !!@local.child_gender_input",
      "exclude_from_translation": true
    },
    {
      "type": "begin_display_group",
      "name": "dg_footer",
      "parameter_list": "sticky: bottom;",
      "style_list": "padding: 12px 24px;",
      "exclude_from_translation": true
    },
    {
      "type": "round_button",
      "name": "button_back",
      "action_list": "click | emit: uncompleted",
      "parameter_list": "icon_src: arrow-back;\nvariant: no-background;",
      "exclude_from_translation": true
    },
    {
      "type": "button",
      "name": "button_completed_2",
      "value": "@global.continue",
      "action_list": "click | set_field: child_age: @local.child_age_input;\nclick | set_field: user_relationship: @local.user_relationship_input;\nclick | set_field: child_gender: @local.child_gender_input;\nclick | emit: completed;",
      "parameter_list": "style: navigation;\ndisabled: !@local.completed_enabled",
      "style_list": "flex: 1",
      "exclude_from_translation": true
    },
    {
      "type": "end_display_group"
    }
  ]
}